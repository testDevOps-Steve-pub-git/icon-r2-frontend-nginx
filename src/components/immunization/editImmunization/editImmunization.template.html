<div class="modal-header">
  <span class="icon-modal-close-button pull-right" aria-label="Close Button" ng-click="$ctrl.$close()">
      <i class="fa fa-times-circle fa-2x"></i>
    </span>
  <h4 class="text-center">
    <span
    translate="editImmunization.IMMUNIZATION_MODAL_TITLE"
    translate-values="{ patient_name : $ctrl.patient.firstName }" translate-compile>
    </span>
  </h4>
</div>

<div class="modal-body">
  <form
  name="addImmunizationForm"
  autocomplete="off">
    <!-- Date capture -->
    <div class="form-group">

      <datepicker
        input-id="immunizations-date-input"
        input-name="immunizationGroupDate"
        model="$ctrl.immunization.date"
        form-name="addImmunizationForm"
        min-date="{{$ctrl.minDate}}"
        ng-required="true">
        <label for="immunizations-date-input" aria-label="{{ 'editImmunization.DATE_LABEL' | translate }}">{{ 'editImmunization.DATE' | translate }}</label>
      </datepicker>
    </div>

    <div class="form-group">
      <!-- Toggle glyph mirrors checkbox input -->
      <span class="icon-text-large">
        <span
        class="fa fa-1x"
        ng-class="{
          'fa-toggle-on text-primary':   $ctrl.immunization.isDateApproximate,
          'fa-toggle-off text-muted': !$ctrl.immunization.isDateApproximate
        }"
        ng-click="$ctrl.immunization.isDateApproximate = !$ctrl.immunization.isDateApproximate"
        aria-hidden="true">
        </span>
      </span>
      <!-- Checkbox input available for screen-readers -->
      <input class="sr-only" id="is-date-approximate" type="checkbox" ng-model="$ctrl.immunization.isDateApproximate" />

      <label class="text" for="is-date-approximate">{{'editImmunization.DATE_ESTIMATED' | translate}}</label>
    </div>
    <!-- End date capture -->

    <!-- Immunization capture -->
    <div class="form-group">
      <immunization-typeahead model="$ctrl.immunization"></immunization-typeahead>

      <!--Error Messages-->
      <div class="error-messages" id="no-immunizations-selected"  ng-if="addImmunizationForm.selectedVaccine.$touched && $ctrl.immunization.agent.snomed === ''" role="alert">
        <div class="alert alert-danger col-xs-12"
             aria-label="">{{ 'editImmunization.IMMS_ERROR' | translate}}</div>
      </div>
      <!--End Error Messages-->
    </div>

    <div class="form-group">
      <immunization-lot-input
      immunization="$ctrl.immunization"
      snomed="$ctrl.immunization.trade.snomed">
      </immunization-lot-input>
    </div>
    <!-- End immunization capture -->
  </form>
</div>

<div class="modal-footer center-block">
  <button class="btn btn-primary" 
  id="immunizations-save"

  ng-click="$ctrl.save($ctrl.immunization, addImmunizationForm)">
    {{ 'editImmunization.SAVE' | translate }}
  </button>
</div>