<div>
  <patient-auth-display
      page="submission"
      client-info="$ctrl.localPatient">
  </patient-auth-display>
  <br aria-hidden="true"/>
  <div class="row">
    <div class="col-xs-12">
      <p translate="authSelfPatientContainer.PATIENT_INFO_MESSAGE"
      translate-values="{ name_key : '{{ $ctrl.multitenancy.NAME_KEY | translate }}',
                             phone_key : '{{$ctrl.multitenancy.PHONE_KEY | translate}}' }"
                             translate-compile>
      </p>
    </div>
  </div>
  <hr />

  <h2>{{ 'authSelfPatientContainer.ADDITIONAL_INFORMATION' | translate }}</h2>
  <div class="row">
    <div class="col-xs-12">
      <p>
        {{ 'authSelfPatientContainer.ENTER_MISSING_INFO'| translate }}
      </p>
    </div>
  </div>

  <submitter-phone
      form="$ctrl.form"
      local-submitter-info="$ctrl.localSubmitter">
  </submitter-phone>

  <!--Health Card Number-->
  <div class="row">
    <!--Health Card Number-->
    <div class="form-group col-xs-12 col-sm-12 col-md-6">
      <!--Health Card Number-->
      <label for="patient-hcn" translate='authSelfPatientContainer.HEALTH_CARD_NUMBER' aria-label="{{'authSelfPatientContainer.HEALTH_CARD_NUMBER' | translate}}"></label>
      {{ 'authSelfPatientContainer.OPTIONAL' | translate }}

      <!--Non Mobile -->
      <div class="icon-mask-display">
        <input ng-model="$ctrl.localPatient.healthCardNumber"
               name="healthCardNumber"
               id="patient-hcn" class="form-control"
               type="text"
               icon-hcn-checksum
               ui-options="$ctrl.hcnOptions"
               ui-mask="AAAA-AAA-AAA" ui-mask-placeholder ui-mask-placeholder-char="_"
               autocomplete="off" />
      </div>

      <!-- Mobile -->
      <div class="icon-display-mobile">
        <input ng-model="$ctrl.localPatient.healthCardNumber"
               name="healthCardNumberMobile"
               id="patient-hcn" class="form-control"
               type="text"
               icon-hcn-checksum
               autocomplete="off" />
      </div>

      <span>{{ 'authOtherPatientContainer.HEALTH_CARD_NO_VC' | translate }}</span>

      <!--Error Messages-->
      <div class="error-messages icon-mask-display" id="patient-hcn-error" ng-messages="$ctrl.form.healthCardNumber.$error" ng-if="$ctrl.form.healthCardNumber.$touched" role="alert">
        <div ng-message="iconHcn"
             class="alert alert-danger col-xs-12"
             translate='authSelfPatientContainer.ERRORS.HCN_FORMAT_ERROR'
             aria-label="{{'authSelfPatientContainer.ERRORS.HCN_FORMAT_ERROR' | translate}}"></div>
        <div ng-message="mask"
             class="alert alert-danger col-xs-12"
             translate='authSelfPatientContainer.ERRORS.HCN_FORMAT_ERROR'
             aria-label="{{'authSelfPatientContainer.ERRORS.HCN_FORMAT_ERROR' | translate}}"></div>
      </div>

      <div class="error-messages icon-display-mobile" id="patient-hcn-error" ng-messages="$ctrl.form.healthCardNumberMobile.$error" ng-if="$ctrl.form.healthCardNumberMobile.$touched" role="alert">
        <div ng-message="iconHcn"
             class="alert alert-danger col-xs-12"
             translate='authSelfPatientContainer.ERRORS.HCN_FORMAT_ERROR'
             aria-label="{{'authSelfPatientContainer.ERRORS.HCN_FORMAT_ERROR' | translate}}"></div>
        <div ng-message="mask"
             class="alert alert-danger col-xs-12"
             translate='authSelfPatientContainer.ERRORS.HCN_FORMAT_ERROR'
             aria-label="{{'authSelfPatientContainer.ERRORS.HCN_FORMAT_ERROR' | translate}}"></div>
      </div>
      <!--End Error Messages-->
    </div>
  </div>
  <!--End Health Card Number-->

  <!--Patient School or Daycare-->
  <div class="row">
    <div class="form-group col-xs-12 col-sm-12 col-md-6">
      <label for="patient-school" translate='authSelfPatientContainer.DAYCARE' aria-label="{{'authSelfPatientContainer.DAYCARE' | translate}}"></label> {{'authSelfPatientContainer.DAYCARE_IF_APPLICABLE' | translate}}
      <input type="text"
             id="patient-school"
             name="schoolOrDaycare"
             class="form-control"
             ng-pattern="$ctrl.rgx.SCHOOL_NAME"
             ng-maxlength="100"
             ng-model="$ctrl.localPatient.schoolOrDayCare"
             typeahead-loading="loadingLocations"
             typeahead-no-results="noResults"
             typeahead-on-select="$ctrl.onSchoolOrDaycareSelect($item)"
             uib-typeahead="schools.name as (schools.name + ', ' + schools.address + ', ' + schools.city ) for schools in $ctrl.getSchoolOrDaycare($viewValue) | limitTo:8"
             autocomplete="off" />

      <span ng-show="loadingLocations" class="fa fa-refresh" aria-hidden="true"></span>
      <div ng-show="noResults">
        {{ 'authSelfPatientContainer.NO_RESULTS_FOUND' | translate }}
      </div>

      <!--Error Messages-->
      <div class="error-messages" id="patient-school-error" ng-messages="$ctrl.form.schoolOrDaycare.$error" ng-if="$ctrl.form.schoolOrDaycare.$touched" role="alert">
        <div class="alert alert-danger" ng-message="pattern" translate='authSelfPatientContainer.ERRORS.BAD_FORMAT' aria-label='authSelfPatientContainer.ERRORS.BAD_FORMAT'></div>
        <div class="alert alert-danger" ng-message="maxlength" translate='authSelfPatientContainer.ERRORS.EXCEEDS_MAXLENGTH' aria-label='authSelfPatientContainer.ERRORS.EXCEEDS_MAXLENGTH'></div>
      </div>
      <!--End Error Messages-->
    </div>
  </div>
  <!--End School or Daycare-->

  <submitter-email
    form="$ctrl.form"
    local-submitter-info="$ctrl.localSubmitter">
  </submitter-email>
</div>
